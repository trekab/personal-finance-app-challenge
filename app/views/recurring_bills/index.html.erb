<%# app/views/recurring_bills/index.html.erb %>
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="flex justify-between mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Recurring Bills</h1>
    <%= link_to new_recurring_bill_path, data: { turbo_frame: "modal" },
                class: "btn btn-primary" do %>
      + Add New Bill
    <% end %>
  </div>

  <div class="lg:grid lg:grid-cols-3 md:flex md:flex-col gap-4 mb-6">
    <div class="block md:grid md:grid-cols-2 lg:block lg:col-span-1 gap-4">
      <%# Summary Card %>
      <div class="bg-gray-900 rounded-xl p-6 mb-6 flex items-center">
        <div class="p-4">
          <svg width="32" height="27" viewBox="0 0 32 27" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M24.375 9.6875C24.375 9.93614 24.2762 10.1746 24.1004 10.3504C23.9246 10.5262 23.6861 10.625 23.4375 10.625H8.4375C8.18886 10.625 7.9504 10.5262 7.77459 10.3504C7.59877 10.1746 7.5 9.93614 7.5 9.6875C7.5 9.43886 7.59877 9.2004 7.77459 9.02459C7.9504 8.84877 8.18886 8.75 8.4375 8.75H23.4375C23.6861 8.75 23.9246 8.84877 24.1004 9.02459C24.2762 9.2004 24.375 9.43886 24.375 9.6875ZM23.4375 13.75H8.4375C8.18886 13.75 7.9504 13.8488 7.77459 14.0246C7.59877 14.2004 7.5 14.4389 7.5 14.6875C7.5 14.9361 7.59877 15.1746 7.77459 15.3504C7.9504 15.5262 8.18886 15.625 8.4375 15.625H23.4375C23.6861 15.625 23.9246 15.5262 24.1004 15.3504C24.2762 15.1746 24.375 14.9361 24.375 14.6875C24.375 14.4389 24.2762 14.2004 24.1004 14.0246C23.9246 13.8488 23.6861 13.75 23.4375 13.75ZM31.875 2.1875V25.9375C31.8748 26.0973 31.8338 26.2543 31.7559 26.3938C31.6779 26.5333 31.5657 26.6505 31.4297 26.7344C31.2821 26.8265 31.1115 26.8753 30.9375 26.875C30.7922 26.8751 30.6488 26.8414 30.5188 26.7766L25.9375 24.4859L21.3562 26.7766C21.2262 26.8415 21.0828 26.8753 20.9375 26.8753C20.7922 26.8753 20.6488 26.8415 20.5188 26.7766L15.9375 24.4859L11.3562 26.7766C11.2262 26.8415 11.0828 26.8753 10.9375 26.8753C10.7922 26.8753 10.6488 26.8415 10.5188 26.7766L5.9375 24.4859L1.35625 26.7766C1.2133 26.8479 1.05447 26.8816 0.894862 26.8743C0.735249 26.867 0.580141 26.8191 0.444264 26.735C0.308387 26.651 0.196248 26.5336 0.118495 26.394C0.040741 26.2544 -4.78237e-05 26.0973 4.20793e-08 25.9375V2.1875C4.20793e-08 1.60734 0.230468 1.05094 0.640704 0.640704C1.05094 0.230468 1.60734 0 2.1875 0H29.6875C30.2677 0 30.8241 0.230468 31.2343 0.640704C31.6445 1.05094 31.875 1.60734 31.875 2.1875ZM30 2.1875C30 2.10462 29.9671 2.02513 29.9085 1.96653C29.8499 1.90792 29.7704 1.875 29.6875 1.875H2.1875C2.10462 1.875 2.02513 1.90792 1.96653 1.96653C1.90792 2.02513 1.875 2.10462 1.875 2.1875V24.4203L5.51875 22.5984C5.64879 22.5335 5.79215 22.4997 5.9375 22.4997C6.08285 22.4997 6.22621 22.5335 6.35625 22.5984L10.9375 24.8891L15.5188 22.5984C15.6488 22.5335 15.7922 22.4997 15.9375 22.4997C16.0828 22.4997 16.2262 22.5335 16.3562 22.5984L20.9375 24.8891L25.5188 22.5984C25.6488 22.5335 25.7922 22.4997 25.9375 22.4997C26.0828 22.4997 26.2262 22.5335 26.3562 22.5984L30 24.4203V2.1875Z" fill="white"/>
          </svg>
        </div>

        <div class="ml-4">
          <div class="text-white text-sm mb-4">Total Bills</div>
          <div class="text-white text-4xl font-bold">$<%= number_with_precision(@total_bills, precision: 2) %></div>
        </div>
      </div>

      <%# Summary Stats %>
      <div class="bg-white rounded-lg p-6 mb-6 space-y-3">
        <h2 class="font-semibold text-gray-900 mb-4">Summary</h2>

        <div class="flex justify-between items-center">
          <span class="text-gray-600 text-sm">Paid Bills</span>
          <span class="text-gray-900 font-medium">$<%= number_with_precision([@total_bills - @total_upcoming - @total_overdue, 0].max, precision: 2) %></span>
        </div>

        <div class="flex justify-between items-center">
          <span class="text-gray-600 text-sm">Total Upcoming</span>
          <span class="text-gray-900 font-medium">$<%= number_with_precision(@total_upcoming, precision: 2) %></span>
        </div>

        <div class="flex justify-between items-center">
          <span class="text-red-600 text-sm">Due Soon</span>
          <span class="text-red-600 font-medium">$<%= number_with_precision(@total_overdue, precision: 2) %></span>
        </div>
      </div>
    </div>

    <div class="lg:col-span-2">
      <div class="bg-white rounded-lg shadow-sm px-4 py-4 sm:px-6">
        <!-- Filters Section with Loading State -->
        <div data-controller="loading"
             data-action="turbo:submit-start->loading#show turbo:submit-end->loading#hide turbo:frame-load->loading#hide"
             class="relative">

          <%= turbo_frame_tag "bills_filters" do %>
            <%= form_with url: recurring_bills_path, method: :get,
                          data: {
                            turbo_frame: "bills_list",
                            turbo_action: "advance",
                            controller: "auto-submit",
                            action: "change->auto-submit#submit"
                          },
                          class: "pt-4 mb-4" do |f| %>

              <div class="flex flex-row gap-3 md:grid md:grid-cols-3 md:gap-4 md:items-center">
                <!-- Search Bar -->
                <div class="relative w-full md:col-span-1">
                  <%= f.text_field :search,
                                   value: params[:search],
                                   placeholder: "Search bill",
                                   data: { action: "input->auto-submit#submit" },
                                   class: "w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg
                               focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent" %>

                  <button type="submit" class="absolute right-3 top-1/2 -translate-y-1/2">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                  </button>
                </div>
                <div class="md:col-span-1"></div>

                <div class="flex flex-row gap-3 md:col-span-1 md:justify-between">
                  <!-- Sort Filter -->
                  <div class="w-full flex items-center gap-2">
                    <!-- Mobile Dropdown (DaisyUI) -->
                    <div class="dropdown dropdown-end sm:hidden">
                      <div tabindex="0" role="button" class="btn btn-ghost btn-sm">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M16.25 2.5L3.75 2.5C3.41848 2.5 3.10054 2.6317 2.86612 2.86612C2.6317 3.10054 2.5 3.41848 2.5 3.75L2.5 16.25C2.5 16.5815 2.6317 16.8995 2.86612 17.1339C3.10054 17.3683 3.41848 17.5 3.75 17.5H16.25C16.5815 17.5 16.8995 17.3683 17.1339 17.1339C17.3683 16.8995 17.5 16.5815 17.5 16.25V3.75C17.5 3.41848 17.3683 3.10054 17.1339 2.86612C16.8995 2.6317 16.5815 2.5 16.25 2.5ZM5.625 5.625L13.125 5.625C13.2908 5.625 13.4497 5.69085 13.5669 5.80806C13.6842 5.92527 13.75 6.08424 13.75 6.25C13.75 6.41576 13.6842 6.57473 13.5669 6.69194C13.4497 6.80915 13.2908 6.875 13.125 6.875L5.625 6.875C5.45924 6.875 5.30027 6.80915 5.18306 6.69194C5.06585 6.57473 5 6.41576 5 6.25C5 6.08424 5.06585 5.92527 5.18306 5.80806C5.30027 5.69085 5.45924 5.625 5.625 5.625ZM8.75 14.375L5.625 14.375C5.45924 14.375 5.30027 14.3092 5.18306 14.1919C5.06585 14.0747 5 13.9158 5 13.75C5 13.5842 5.06585 13.4253 5.18306 13.3081C5.30027 13.1908 5.45924 13.125 5.625 13.125L8.75 13.125C8.91576 13.125 9.07473 13.1908 9.19194 13.3081C9.30915 13.4253 9.375 13.5842 9.375 13.75C9.375 13.9158 9.30915 14.0747 9.19194 14.1919C9.07473 14.3092 8.91576 14.375 8.75 14.375ZM9.375 10.625L5.625 10.625C5.45924 10.625 5.30027 10.5592 5.18306 10.4419C5.06585 10.3247 5 10.1658 5 10C5 9.83424 5.06585 9.67527 5.18306 9.55806C5.30027 9.44085 5.45924 9.375 5.625 9.375H9.375C9.54076 9.375 9.69973 9.44085 9.81694 9.55806C9.93415 9.67527 10 9.83424 10 10C10 10.1658 9.93415 10.3247 9.81694 10.4419C9.69973 10.5592 9.54076 10.625 9.375 10.625ZM15.4422 12.9422L13.5672 14.8172C13.5091 14.8753 13.4402 14.9214 13.3643 14.9529C13.2885 14.9843 13.2071 15.0005 13.125 15.0005C13.0429 15.0005 12.9615 14.9843 12.8857 14.9529C12.8098 14.9214 12.7409 14.8753 12.6828 14.8172L10.8078 12.9422C10.6905 12.8249 10.6247 12.6659 10.6247 12.5C10.6247 12.3341 10.6905 12.1751 10.8078 12.0578C10.9251 11.9405 11.0841 11.8747 11.25 11.8747C11.4159 11.8747 11.5749 11.9405 11.6922 12.0578L12.5 12.8664V9.375C12.5 9.20924 12.5658 9.05027 12.6831 8.93306C12.8003 8.81585 12.9592 8.75 13.125 8.75C13.2908 8.75 13.4497 8.81585 13.5669 8.93306C13.6842 9.05027 13.75 9.20924 13.75 9.375V12.8664L14.5578 12.0578C14.6751 11.9405 14.8341 11.8747 15 11.8747C15.1659 11.8747 15.3249 11.9405 15.4422 12.0578C15.5595 12.1751 15.6253 12.3341 15.6253 12.5C15.6253 12.6659 15.5595 12.8249 15.4422 12.9422Z" fill="#201F24"/>
                        </svg>
                      </div>
                      <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                        <li class="menu-title text-xs">Sort by</li>
                        <li><a href="#" data-sort="latest" class="sort-option">Latest</a></li>
                        <li><a href="#" data-sort="oldest" class="sort-option">Oldest</a></li>
                        <li><a href="#" data-sort="asc" class="sort-option">A to Z</a></li>
                        <li><a href="#" data-sort="desc" class="sort-option">Z to A</a></li>
                        <li><a href="#" data-sort="highest" class="sort-option">Highest</a></li>
                        <li><a href="#" data-sort="lowest" class="sort-option">Lowest</a></li>
                      </ul>
                    </div>

                    <!-- Desktop/Tablet Label + Dropdown -->
                    <div class="hidden sm:flex items-center gap-2 w-full">
                      <span class="text-sm text-gray-600 whitespace-nowrap">Sort by</span>

                      <%= f.select :sort,
                                   [
                                     ['Latest', 'latest'],
                                     ['Oldest', 'oldest'],
                                     ['A to Z', 'asc'],
                                     ['Z to A', 'desc'],
                                     ['Highest', 'highest'],
                                     ['Lowest', 'lowest']
                                   ],
                                   { selected: params[:sort] || 'latest' },
                                   class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900" %>
                    </div>
                  </div>
                </div>

                <script>
                    // Handle sort option clicks
                    document.addEventListener('click', function(e) {
                        if (e.target.classList.contains('sort-option')) {
                            e.preventDefault();

                            const form = e.target.closest('form');
                            if (!form) return;

                            // Get the sort value
                            const sortValue = e.target.dataset.sort;

                            if (sortValue) {
                                const sortSelect = form.querySelector('select[name="sort"]');
                                if (sortSelect) sortSelect.value = sortValue;
                            }

                            // Submit the form
                            form.requestSubmit();

                            // Close dropdown by removing focus
                            document.activeElement.blur();
                        }
                    });
                </script>
              </div>
            <% end %>
          <% end %>

          <!-- Loading Spinner Overlay -->
          <div data-loading-target="spinner"
               class="hidden absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg z-10">
            <div class="flex flex-col items-center gap-3">
              <!-- Spinner -->
              <div class="animate-spin rounded-full h-10 w-10 border-4 border-gray-200 border-t-gray-900"></div>
              <!-- Loading Text -->
              <p class="text-sm text-gray-600 font-medium">Loading bills...</p>
            </div>
          </div>
        </div>

        <!-- Transactions Table - Desktop/Tablet -->
        <%= turbo_frame_tag "bills_list" do %>
          <div class="hidden sm:block overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead>
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">Bill Title</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">Due Date</th>
                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 tracking-wider">Amount</th>
              </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
              <% if @recurring_bills.any? %>
                <% @recurring_bills.each do |bill| %>
                  <tr class="hover:bg-gray-50 transition-colors duration-150">
                    <td class="p-4 whitespace-nowrap">
                      <div class="flex items-center">
                        <div class="avatar avatar-placeholder">
                          <div class="bg-neutral text-neutral-content w-8 rounded-full">
                            <span class="text-xl"><%= bill.bill_title.humanize[0] %></span>
                          </div>
                        </div>
                        <div class="ml-4">
                          <div class="text-sm font-medium text-gray-900"><%= bill.bill_title.humanize %></div>
                        </div>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="flex items-center">
                        <div class="text-sm text-teal-600 mr-2"><%= bill.frequency_display %></div>
                        <% if bill.overdue? %>
                          <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.5 0C5.21442 0 3.95772 0.381218 2.8888 1.09545C1.81988 1.80968 0.986756 2.82484 0.494786 4.01256C0.00281635 5.20028 -0.125905 6.50721 0.124899 7.76809C0.375703 9.02896 0.994767 10.1872 1.90381 11.0962C2.81285 12.0052 3.97104 12.6243 5.23192 12.8751C6.49279 13.1259 7.79973 12.9972 8.98744 12.5052C10.1752 12.0132 11.1903 11.1801 11.9046 10.1112C12.6188 9.04229 13 7.78558 13 6.5C12.9982 4.77665 12.3128 3.12441 11.0942 1.90582C9.8756 0.687224 8.22335 0.00181989 6.5 0ZM6 3.5C6 3.36739 6.05268 3.24021 6.14645 3.14645C6.24022 3.05268 6.36739 3 6.5 3C6.63261 3 6.75979 3.05268 6.85356 3.14645C6.94732 3.24021 7 3.36739 7 3.5V7C7 7.13261 6.94732 7.25979 6.85356 7.35355C6.75979 7.44732 6.63261 7.5 6.5 7.5C6.36739 7.5 6.24022 7.44732 6.14645 7.35355C6.05268 7.25979 6 7.13261 6 7V3.5ZM6.5 10C6.35167 10 6.20666 9.95601 6.08333 9.8736C5.95999 9.79119 5.86386 9.67406 5.80709 9.53701C5.75033 9.39997 5.73548 9.24917 5.76441 9.10368C5.79335 8.9582 5.86478 8.82456 5.96967 8.71967C6.07456 8.61478 6.2082 8.54335 6.35368 8.51441C6.49917 8.48547 6.64997 8.50033 6.78701 8.55709C6.92406 8.61386 7.04119 8.70999 7.1236 8.83332C7.20602 8.95666 7.25 9.10166 7.25 9.25C7.25 9.44891 7.17098 9.63968 7.03033 9.78033C6.88968 9.92098 6.69892 10 6.5 10Z" fill="#C94736"/>
                          </svg>
                        <% elsif bill.upcoming? %>
                        <% else %>
                          <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.5 0C5.21442 0 3.95772 0.381218 2.8888 1.09545C1.81988 1.80968 0.986756 2.82484 0.494786 4.01256C0.00281635 5.20028 -0.125905 6.50721 0.124899 7.76809C0.375703 9.02896 0.994767 10.1872 1.90381 11.0962C2.81285 12.0052 3.97104 12.6243 5.23192 12.8751C6.49279 13.1259 7.79973 12.9972 8.98744 12.5052C10.1752 12.0132 11.1903 11.1801 11.9046 10.1112C12.6188 9.04229 13 7.78558 13 6.5C12.9982 4.77665 12.3128 3.12441 11.0942 1.90582C9.8756 0.687224 8.22335 0.00181989 6.5 0ZM9.35375 5.35375L5.85375 8.85375C5.80732 8.90024 5.75217 8.93712 5.69147 8.96228C5.63077 8.98744 5.56571 9.00039 5.5 9.00039C5.4343 9.00039 5.36923 8.98744 5.30853 8.96228C5.24783 8.93712 5.19269 8.90024 5.14625 8.85375L3.64625 7.35375C3.55243 7.25993 3.49972 7.13268 3.49972 7C3.49972 6.86732 3.55243 6.74007 3.64625 6.64625C3.74007 6.55243 3.86732 6.49972 4 6.49972C4.13268 6.49972 4.25993 6.55243 4.35375 6.64625L5.5 7.79313L8.64625 4.64625C8.69271 4.59979 8.74786 4.56294 8.80855 4.5378C8.86925 4.51266 8.93431 4.49972 9 4.49972C9.0657 4.49972 9.13075 4.51266 9.19145 4.5378C9.25215 4.56294 9.3073 4.59979 9.35375 4.64625C9.40021 4.6927 9.43706 4.74786 9.4622 4.80855C9.48734 4.86925 9.50028 4.9343 9.50028 5C9.50028 5.0657 9.48734 5.13075 9.4622 5.19145C9.43706 5.25214 9.40021 5.3073 9.35375 5.35375Z" fill="#277C78"/>
                          </svg>
                        <% end %>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right">
                      <div class="text-sm font-semibold <%= bill.overdue? ? 'text-red-600' : '' %>">
                        <%= number_to_currency(bill.amount, precision: 2) %>
                      </div>
                    </td>
                  </tr>
                <% end %>
              <% else %>
                <tr>
                  <td colspan="4" class="px-6 py-12 text-center">
                    <div class="flex flex-col items-center gap-2">
                      <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                      </svg>
                      <p class="text-gray-500 font-medium">No bills found</p>
                      <p class="text-sm text-gray-400">Try adjusting your search or filters</p>
                    </div>
                  </td>
                </tr>
              <% end %>
              </tbody>
            </table>
          </div>

          <!-- Transactions List - Mobile -->
          <div class="sm:hidden divide-y divide-gray-200">
            <% if @recurring_bills.any? %>
              <% @recurring_bills.each do |bill| %>
                <div class="px-4 py-4 hover:bg-gray-50 transition-colors duration-150">
                  <div class="block">
                    <div class="flex items-center flex-1 min-w-0">
                      <div class="flex-shrink-0">
                        <div class="avatar avatar-placeholder">
                          <div class="bg-neutral text-neutral-content w-8 rounded-full">
                            <span class="text-xl"><%= bill.bill_title.humanize[0] %></span>
                          </div>
                        </div>
                      </div>
                      <div class="ml-3 flex-1 min-w-0">
                        <p class="text-md font-medium text-gray-900 truncate"><%= bill.bill_title.humanize %></p>
                      </div>
                    </div>
                    <div class="flex justify-between mt-2">
                      <div class="flex flex-row">
                        <p class="text-xs text-teal-600 mr-2"><%= bill.frequency_display %></p>
                        <% if bill.overdue? %>
                          <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.5 0C5.21442 0 3.95772 0.381218 2.8888 1.09545C1.81988 1.80968 0.986756 2.82484 0.494786 4.01256C0.00281635 5.20028 -0.125905 6.50721 0.124899 7.76809C0.375703 9.02896 0.994767 10.1872 1.90381 11.0962C2.81285 12.0052 3.97104 12.6243 5.23192 12.8751C6.49279 13.1259 7.79973 12.9972 8.98744 12.5052C10.1752 12.0132 11.1903 11.1801 11.9046 10.1112C12.6188 9.04229 13 7.78558 13 6.5C12.9982 4.77665 12.3128 3.12441 11.0942 1.90582C9.8756 0.687224 8.22335 0.00181989 6.5 0ZM6 3.5C6 3.36739 6.05268 3.24021 6.14645 3.14645C6.24022 3.05268 6.36739 3 6.5 3C6.63261 3 6.75979 3.05268 6.85356 3.14645C6.94732 3.24021 7 3.36739 7 3.5V7C7 7.13261 6.94732 7.25979 6.85356 7.35355C6.75979 7.44732 6.63261 7.5 6.5 7.5C6.36739 7.5 6.24022 7.44732 6.14645 7.35355C6.05268 7.25979 6 7.13261 6 7V3.5ZM6.5 10C6.35167 10 6.20666 9.95601 6.08333 9.8736C5.95999 9.79119 5.86386 9.67406 5.80709 9.53701C5.75033 9.39997 5.73548 9.24917 5.76441 9.10368C5.79335 8.9582 5.86478 8.82456 5.96967 8.71967C6.07456 8.61478 6.2082 8.54335 6.35368 8.51441C6.49917 8.48547 6.64997 8.50033 6.78701 8.55709C6.92406 8.61386 7.04119 8.70999 7.1236 8.83332C7.20602 8.95666 7.25 9.10166 7.25 9.25C7.25 9.44891 7.17098 9.63968 7.03033 9.78033C6.88968 9.92098 6.69892 10 6.5 10Z" fill="#C94736"/>
                          </svg>
                        <% elsif bill.upcoming? %>
                        <% else %>
                          <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.5 0C5.21442 0 3.95772 0.381218 2.8888 1.09545C1.81988 1.80968 0.986756 2.82484 0.494786 4.01256C0.00281635 5.20028 -0.125905 6.50721 0.124899 7.76809C0.375703 9.02896 0.994767 10.1872 1.90381 11.0962C2.81285 12.0052 3.97104 12.6243 5.23192 12.8751C6.49279 13.1259 7.79973 12.9972 8.98744 12.5052C10.1752 12.0132 11.1903 11.1801 11.9046 10.1112C12.6188 9.04229 13 7.78558 13 6.5C12.9982 4.77665 12.3128 3.12441 11.0942 1.90582C9.8756 0.687224 8.22335 0.00181989 6.5 0ZM9.35375 5.35375L5.85375 8.85375C5.80732 8.90024 5.75217 8.93712 5.69147 8.96228C5.63077 8.98744 5.56571 9.00039 5.5 9.00039C5.4343 9.00039 5.36923 8.98744 5.30853 8.96228C5.24783 8.93712 5.19269 8.90024 5.14625 8.85375L3.64625 7.35375C3.55243 7.25993 3.49972 7.13268 3.49972 7C3.49972 6.86732 3.55243 6.74007 3.64625 6.64625C3.74007 6.55243 3.86732 6.49972 4 6.49972C4.13268 6.49972 4.25993 6.55243 4.35375 6.64625L5.5 7.79313L8.64625 4.64625C8.69271 4.59979 8.74786 4.56294 8.80855 4.5378C8.86925 4.51266 8.93431 4.49972 9 4.49972C9.0657 4.49972 9.13075 4.51266 9.19145 4.5378C9.25215 4.56294 9.3073 4.59979 9.35375 4.64625C9.40021 4.6927 9.43706 4.74786 9.4622 4.80855C9.48734 4.86925 9.50028 4.9343 9.50028 5C9.50028 5.0657 9.48734 5.13075 9.4622 5.19145C9.43706 5.25214 9.40021 5.3073 9.35375 5.35375Z" fill="#277C78"/>
                          </svg>
                        <% end %>
                      </div>
                      <p class="text-sm font-semibold <%= bill.overdue? ? 'text-red-600' : '' %>">
                        <%= number_to_currency(bill.amount, precision: 2) %>
                      </p>
                    </div>
                  </div>
                </div>
              <% end %>
            <% else %>
              <div class="px-4 py-12 text-center">
                <div class="flex flex-col items-center gap-2">
                  <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                  </svg>
                  <p class="text-gray-500 font-medium">No bills found</p>
                  <p class="text-sm text-gray-400">Try adjusting your search or filters</p>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>